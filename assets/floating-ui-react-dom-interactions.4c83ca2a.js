import{r as g,b as Be,c as Me,j as Xe}from"./react.14b2d053.js";function q(e){return e.split("-")[0]}function Z(e){return e.split("-")[1]}function ee(e){return["top","bottom"].includes(q(e))?"x":"y"}function he(e){return e==="y"?"height":"width"}function we(e,t,n){let{reference:o,floating:r}=e;const s=o.x+o.width/2-r.width/2,c=o.y+o.height/2-r.height/2,i=ee(t),l=he(i),u=o[l]/2-r[l]/2,p=q(t),a=i==="x";let f;switch(p){case"top":f={x:s,y:o.y-r.height};break;case"bottom":f={x:s,y:o.y+o.height};break;case"right":f={x:o.x+o.width,y:c};break;case"left":f={x:o.x-r.width,y:c};break;default:f={x:o.x,y:o.y}}switch(Z(t)){case"start":f[i]-=u*(n&&a?-1:1);break;case"end":f[i]+=u*(n&&a?-1:1);break}return f}const ze=async(e,t,n)=>{const{placement:o="bottom",strategy:r="absolute",middleware:s=[],platform:c}=n,i=await(c.isRTL==null?void 0:c.isRTL(t));let l=await c.getElementRects({reference:e,floating:t,strategy:r}),{x:u,y:p}=we(l,o,i),a=o,f={},m=0;for(let d=0;d<s.length;d++){const{name:h,fn:v}=s[d],{x:w,y,data:b,reset:x}=await v({x:u,y:p,initialPlacement:o,placement:a,strategy:r,middlewareData:f,rects:l,platform:c,elements:{reference:e,floating:t}});if(u=w!=null?w:u,p=y!=null?y:p,f={...f,[h]:{...f[h],...b}},x&&m<=50){m++,typeof x=="object"&&(x.placement&&(a=x.placement),x.rects&&(l=x.rects===!0?await c.getElementRects({reference:e,floating:t,strategy:r}):x.rects),{x:u,y:p}=we(l,a,i)),d=-1;continue}}return{x:u,y:p,placement:a,strategy:r,middlewareData:f}};function Ye(e){return{top:0,right:0,bottom:0,left:0,...e}}function Se(e){return typeof e!="number"?Ye(e):{top:e,right:e,bottom:e,left:e}}function ne(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}async function xe(e,t){var n;t===void 0&&(t={});const{x:o,y:r,platform:s,rects:c,elements:i,strategy:l}=e,{boundary:u="clippingAncestors",rootBoundary:p="viewport",elementContext:a="floating",altBoundary:f=!1,padding:m=0}=t,d=Se(m),v=i[f?a==="floating"?"reference":"floating":a],w=ne(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(v)))==null||n?v:v.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(i.floating)),boundary:u,rootBoundary:p,strategy:l})),y=ne(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({rect:a==="floating"?{...c.floating,x:o,y:r}:c.reference,offsetParent:await(s.getOffsetParent==null?void 0:s.getOffsetParent(i.floating)),strategy:l}):c[a]);return{top:w.top-y.top+d.top,bottom:y.bottom-w.bottom+d.bottom,left:w.left-y.left+d.left,right:y.right-w.right+d.right}}const Ge=Math.min,Y=Math.max;function pe(e,t,n){return Y(e,Ge(t,n))}const ye=e=>({name:"arrow",options:e,async fn(t){const{element:n,padding:o=0}=e!=null?e:{},{x:r,y:s,placement:c,rects:i,platform:l}=t;if(n==null)return{};const u=Se(o),p={x:r,y:s},a=ee(c),f=Z(c),m=he(a),d=await l.getDimensions(n),h=a==="y"?"top":"left",v=a==="y"?"bottom":"right",w=i.reference[m]+i.reference[a]-p[a]-i.floating[m],y=p[a]-i.reference[a],b=await(l.getOffsetParent==null?void 0:l.getOffsetParent(n));let x=b?a==="y"?b.clientHeight||0:b.clientWidth||0:0;x===0&&(x=i.floating[m]);const E=w/2-y/2,P=u[h],L=x-d[m]-u[v],O=x/2-d[m]/2+E,C=pe(P,O,L),D=(f==="start"?u[h]:u[v])>0&&O!==C&&i.reference[m]<=i.floating[m]?O<P?P-O:L-O:0;return{[a]:p[a]-D,data:{[a]:C,centerOffset:O-C}}}}),Ke={left:"right",right:"left",bottom:"top",top:"bottom"};function oe(e){return e.replace(/left|right|bottom|top/g,t=>Ke[t])}function Ue(e,t,n){n===void 0&&(n=!1);const o=Z(e),r=ee(e),s=he(r);let c=r==="x"?o===(n?"end":"start")?"right":"left":o==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(c=oe(c)),{main:c,cross:oe(c)}}const qe={start:"end",end:"start"};function Re(e){return e.replace(/start|end/g,t=>qe[t])}function Je(e){const t=oe(e);return[Re(e),t,Re(t)]}const Dt=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n;const{placement:o,middlewareData:r,rects:s,initialPlacement:c,platform:i,elements:l}=t,{mainAxis:u=!0,crossAxis:p=!0,fallbackPlacements:a,fallbackStrategy:f="bestFit",flipAlignment:m=!0,...d}=e,h=q(o),w=a||(h===c||!m?[oe(c)]:Je(c)),y=[c,...w],b=await xe(t,d),x=[];let E=((n=r.flip)==null?void 0:n.overflows)||[];if(u&&x.push(b[h]),p){const{main:C,cross:A}=Ue(o,s,await(i.isRTL==null?void 0:i.isRTL(l.floating)));x.push(b[C],b[A])}if(E=[...E,{placement:o,overflows:x}],!x.every(C=>C<=0)){var P,L;const C=((P=(L=r.flip)==null?void 0:L.index)!=null?P:0)+1,A=y[C];if(A)return{data:{index:C,overflows:E},reset:{placement:A}};let M="bottom";switch(f){case"bestFit":{var O;const D=(O=E.map(S=>[S,S.overflows.filter(R=>R>0).reduce((R,T)=>R+T,0)]).sort((S,R)=>S[1]-R[1])[0])==null?void 0:O[0].placement;D&&(M=D);break}case"initialPlacement":M=c;break}if(o!==M)return{reset:{placement:M}}}return{}}}};async function Qe(e,t){const{placement:n,platform:o,elements:r}=e,s=await(o.isRTL==null?void 0:o.isRTL(r.floating)),c=q(n),i=Z(n),l=ee(n)==="x",u=["left","top"].includes(c)?-1:1,p=s&&l?-1:1,a=typeof t=="function"?t(e):t;let{mainAxis:f,crossAxis:m,alignmentAxis:d}=typeof a=="number"?{mainAxis:a,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...a};return i&&typeof d=="number"&&(m=i==="end"?d*-1:d),l?{x:m*p,y:f*u}:{x:f*u,y:m*p}}const At=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){const{x:n,y:o}=t,r=await Qe(t,e);return{x:n+r.x,y:o+r.y,data:r}}}};function Ze(e){return e==="x"?"y":"x"}const Mt=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:o,placement:r}=t,{mainAxis:s=!0,crossAxis:c=!1,limiter:i={fn:v=>{let{x:w,y}=v;return{x:w,y}}},...l}=e,u={x:n,y:o},p=await xe(t,l),a=ee(q(r)),f=Ze(a);let m=u[a],d=u[f];if(s){const v=a==="y"?"top":"left",w=a==="y"?"bottom":"right",y=m+p[v],b=m-p[w];m=pe(y,m,b)}if(c){const v=f==="y"?"top":"left",w=f==="y"?"bottom":"right",y=d+p[v],b=d-p[w];d=pe(y,d,b)}const h=i.fn({...t,[a]:m,[f]:d});return{...h,data:{x:h.x-n,y:h.y-o}}}}},St=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){const{placement:n,rects:o,platform:r,elements:s}=t,{apply:c=()=>{},...i}=e,l=await xe(t,i),u=q(n),p=Z(n);let a,f;u==="top"||u==="bottom"?(a=u,f=p===(await(r.isRTL==null?void 0:r.isRTL(s.floating))?"start":"end")?"left":"right"):(f=u,a=p==="end"?"top":"bottom");const m=Y(l.left,0),d=Y(l.right,0),h=Y(l.top,0),v=Y(l.bottom,0),w={availableHeight:o.floating.height-(["left","right"].includes(n)?2*(h!==0||v!==0?h+v:Y(l.top,l.bottom)):l[a]),availableWidth:o.floating.width-(["top","bottom"].includes(n)?2*(m!==0||d!==0?m+d:Y(l.left,l.right)):l[f])};await c({...t,...w});const y=await r.getDimensions(s.floating);return o.floating.width!==y.width||o.floating.height!==y.height?{reset:{rects:!0}}:{}}}};function ke(e){return e&&e.document&&e.location&&e.alert&&e.setInterval}function F(e){if(e==null)return window;if(!ke(e)){const t=e.ownerDocument;return t&&t.defaultView||window}return e}function j(e){return F(e).getComputedStyle(e)}function I(e){return ke(e)?"":e?(e.nodeName||"").toLowerCase():""}function $e(){const e=navigator.userAgentData;return e!=null&&e.brands?e.brands.map(t=>t.brand+"/"+t.version).join(" "):navigator.userAgent}function $(e){return e instanceof F(e).HTMLElement}function _(e){return e instanceof F(e).Element}function et(e){return e instanceof F(e).Node}function re(e){if(typeof ShadowRoot>"u")return!1;const t=F(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function ce(e){const{overflow:t,overflowX:n,overflowY:o}=j(e);return/auto|scroll|overlay|hidden/.test(t+o+n)}function tt(e){return["table","td","th"].includes(I(e))}function Ie(e){const t=/firefox/i.test($e()),n=j(e);return n.transform!=="none"||n.perspective!=="none"||n.contain==="paint"||["transform","perspective"].includes(n.willChange)||t&&n.willChange==="filter"||t&&(n.filter?n.filter!=="none":!1)}function Ve(){return!/^((?!chrome|android).)*safari/i.test($e())}const be=Math.min,Q=Math.max,ie=Math.round;function V(e,t,n){var o,r,s,c;t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect();let l=1,u=1;t&&$(e)&&(l=e.offsetWidth>0&&ie(i.width)/e.offsetWidth||1,u=e.offsetHeight>0&&ie(i.height)/e.offsetHeight||1);const p=_(e)?F(e):window,a=!Ve()&&n,f=(i.left+(a&&(o=(r=p.visualViewport)==null?void 0:r.offsetLeft)!=null?o:0))/l,m=(i.top+(a&&(s=(c=p.visualViewport)==null?void 0:c.offsetTop)!=null?s:0))/u,d=i.width/l,h=i.height/u;return{width:d,height:h,top:m,right:f+d,bottom:m+h,left:f,x:f,y:m}}function B(e){return((et(e)?e.ownerDocument:e.document)||window.document).documentElement}function le(e){return _(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function Fe(e){return V(B(e)).left+le(e).scrollLeft}function nt(e){const t=V(e);return ie(t.width)!==e.offsetWidth||ie(t.height)!==e.offsetHeight}function ot(e,t,n){const o=$(t),r=B(t),s=V(e,o&&nt(t),n==="fixed");let c={scrollLeft:0,scrollTop:0};const i={x:0,y:0};if(o||!o&&n!=="fixed")if((I(t)!=="body"||ce(r))&&(c=le(t)),$(t)){const l=V(t,!0);i.x=l.x+t.clientLeft,i.y=l.y+t.clientTop}else r&&(i.x=Fe(r));return{x:s.left+c.scrollLeft-i.x,y:s.top+c.scrollTop-i.y,width:s.width,height:s.height}}function He(e){return I(e)==="html"?e:e.assignedSlot||e.parentNode||(re(e)?e.host:null)||B(e)}function Ee(e){return!$(e)||j(e).position==="fixed"?null:e.offsetParent}function rt(e){let t=He(e);for(re(t)&&(t=t.host);$(t)&&!["html","body"].includes(I(t));){if(Ie(t))return t;{const n=t.parentNode;t=re(n)?n.host:n}}return null}function me(e){const t=F(e);let n=Ee(e);for(;n&&tt(n)&&j(n).position==="static";)n=Ee(n);return n&&(I(n)==="html"||I(n)==="body"&&j(n).position==="static"&&!Ie(n))?t:n||rt(e)||t}function Ce(e){if($(e))return{width:e.offsetWidth,height:e.offsetHeight};const t=V(e);return{width:t.width,height:t.height}}function it(e){let{rect:t,offsetParent:n,strategy:o}=e;const r=$(n),s=B(n);if(n===s)return t;let c={scrollLeft:0,scrollTop:0};const i={x:0,y:0};if((r||!r&&o!=="fixed")&&((I(n)!=="body"||ce(s))&&(c=le(n)),$(n))){const l=V(n,!0);i.x=l.x+n.clientLeft,i.y=l.y+n.clientTop}return{...t,x:t.x-c.scrollLeft+i.x,y:t.y-c.scrollTop+i.y}}function st(e,t){const n=F(e),o=B(e),r=n.visualViewport;let s=o.clientWidth,c=o.clientHeight,i=0,l=0;if(r){s=r.width,c=r.height;const u=Ve();(u||!u&&t==="fixed")&&(i=r.offsetLeft,l=r.offsetTop)}return{width:s,height:c,x:i,y:l}}function ct(e){var t;const n=B(e),o=le(e),r=(t=e.ownerDocument)==null?void 0:t.body,s=Q(n.scrollWidth,n.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),c=Q(n.scrollHeight,n.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0);let i=-o.scrollLeft+Fe(e);const l=-o.scrollTop;return j(r||n).direction==="rtl"&&(i+=Q(n.clientWidth,r?r.clientWidth:0)-s),{width:s,height:c,x:i,y:l}}function We(e){const t=He(e);return["html","body","#document"].includes(I(t))?e.ownerDocument.body:$(t)&&ce(t)?t:We(t)}function K(e,t){var n;t===void 0&&(t=[]);const o=We(e),r=o===((n=e.ownerDocument)==null?void 0:n.body),s=F(o),c=r?[s].concat(s.visualViewport||[],ce(o)?o:[]):o,i=t.concat(c);return r?i:i.concat(K(c))}function lt(e,t){const n=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&re(n)){let o=t;do{if(o&&e===o)return!0;o=o.parentNode||o.host}while(o)}return!1}function ut(e,t){const n=V(e,!1,t==="fixed"),o=n.top+e.clientTop,r=n.left+e.clientLeft;return{top:o,left:r,x:r,y:o,right:r+e.clientWidth,bottom:o+e.clientHeight,width:e.clientWidth,height:e.clientHeight}}function Le(e,t,n){return t==="viewport"?ne(st(e,n)):_(t)?ut(t,n):ne(ct(B(e)))}function ft(e){const t=K(e),o=["absolute","fixed"].includes(j(e).position)&&$(e)?me(e):e;return _(o)?t.filter(r=>_(r)&&lt(r,o)&&I(r)!=="body"):[]}function at(e){let{element:t,boundary:n,rootBoundary:o,strategy:r}=e;const c=[...n==="clippingAncestors"?ft(t):[].concat(n),o],i=c[0],l=c.reduce((u,p)=>{const a=Le(t,p,r);return u.top=Q(a.top,u.top),u.right=be(a.right,u.right),u.bottom=be(a.bottom,u.bottom),u.left=Q(a.left,u.left),u},Le(t,i,r));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}const dt={getClippingRect:at,convertOffsetParentRelativeRectToViewportRelativeRect:it,isElement:_,getDimensions:Ce,getOffsetParent:me,getDocumentElement:B,getElementRects:e=>{let{reference:t,floating:n,strategy:o}=e;return{reference:ot(t,me(n),o),floating:{...Ce(n),x:0,y:0}}},getClientRects:e=>Array.from(e.getClientRects()),isRTL:e=>j(e).direction==="rtl"};function kt(e,t,n,o){o===void 0&&(o={});const{ancestorScroll:r=!0,ancestorResize:s=!0,elementResize:c=!0,animationFrame:i=!1}=o,l=r&&!i,u=s&&!i,p=l||u?[..._(e)?K(e):[],...K(t)]:[];p.forEach(h=>{l&&h.addEventListener("scroll",n,{passive:!0}),u&&h.addEventListener("resize",n)});let a=null;if(c){let h=!0;a=new ResizeObserver(()=>{h||n(),h=!1}),_(e)&&!i&&a.observe(e),a.observe(t)}let f,m=i?V(e):null;i&&d();function d(){const h=V(e);m&&(h.x!==m.x||h.y!==m.y||h.width!==m.width||h.height!==m.height)&&n(),m=h,f=requestAnimationFrame(d)}return n(),()=>{var h;p.forEach(v=>{l&&v.removeEventListener("scroll",n),u&&v.removeEventListener("resize",n)}),(h=a)==null||h.disconnect(),a=null,i&&cancelAnimationFrame(f)}}const pt=(e,t,n)=>ze(e,t,{platform:dt,...n});var ge=typeof document<"u"?g.exports.useLayoutEffect:g.exports.useEffect;function se(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,o,r;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(o=n;o--!==0;)if(!se(e[o],t[o]))return!1;return!0}if(r=Object.keys(e),n=r.length,n!==Object.keys(t).length)return!1;for(o=n;o--!==0;)if(!Object.prototype.hasOwnProperty.call(t,r[o]))return!1;for(o=n;o--!==0;){const s=r[o];if(!(s==="_owner"&&e.$$typeof)&&!se(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function mt(e){const t=g.exports.useRef(e);return ge(()=>{t.current=e}),t}function gt(e){let{middleware:t,placement:n="bottom",strategy:o="absolute",whileElementsMounted:r}=e===void 0?{}:e;const[s,c]=g.exports.useState({x:null,y:null,strategy:o,placement:n,middlewareData:{}}),[i,l]=g.exports.useState(t);se(i==null?void 0:i.map(x=>{let{name:E,options:P}=x;return{name:E,options:P}}),t==null?void 0:t.map(x=>{let{name:E,options:P}=x;return{name:E,options:P}}))||l(t);const u=g.exports.useRef(null),p=g.exports.useRef(null),a=g.exports.useRef(null),f=g.exports.useRef(s),m=mt(r),d=g.exports.useCallback(()=>{!u.current||!p.current||pt(u.current,p.current,{middleware:i,placement:n,strategy:o}).then(x=>{h.current&&!se(f.current,x)&&(f.current=x,Be.exports.flushSync(()=>{c(x)}))})},[i,n,o]);ge(()=>{h.current&&d()},[d]);const h=g.exports.useRef(!1);ge(()=>(h.current=!0,()=>{h.current=!1}),[]);const v=g.exports.useCallback(()=>{if(typeof a.current=="function"&&(a.current(),a.current=null),u.current&&p.current)if(m.current){const x=m.current(u.current,p.current,d);a.current=x}else d()},[d,m]),w=g.exports.useCallback(x=>{u.current=x,v()},[v]),y=g.exports.useCallback(x=>{p.current=x,v()},[v]),b=g.exports.useMemo(()=>({reference:u,floating:p}),[]);return g.exports.useMemo(()=>({...s,update:d,refs:b,reference:w,floating:y}),[s,d,b,w,y])}const $t=e=>{const{element:t,padding:n}=e;function o(r){return Object.prototype.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){return o(t)?t.current!=null?ye({element:t.current,padding:n}).fn(r):{}:t?ye({element:t,padding:n}).fn(r):{}}}};var U=typeof document<"u"?g.exports.useLayoutEffect:g.exports.useEffect;function ht(){const e=new Map;return{emit(t,n){var o;(o=e.get(t))==null||o.forEach(r=>r(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){e.set(t,(e.get(t)||[]).filter(o=>o!==n))}}}let ue=!1,xt=0;const Te=()=>"floating-ui-"+xt++;function vt(){const[e,t]=g.exports.useState(()=>ue?Te():void 0);return U(()=>{e==null&&t(Te())},[]),g.exports.useEffect(()=>{ue||(ue=!0)},[]),e}const Pe=Me["useId".toString()],Oe=Pe!=null?Pe:vt,wt=g.exports.createContext(null),yt=g.exports.createContext(null),Ne=()=>{var e,t;return(e=(t=g.exports.useContext(wt))==null?void 0:t.id)!=null?e:null},ve=()=>g.exports.useContext(yt);function N(e){var t;return(t=e==null?void 0:e.ownerDocument)!=null?t:document}function je(e){var t;return(t=N(e).defaultView)!=null?t:window}function G(e){return e?e instanceof je(e).Element:!1}function Rt(e){return e?e instanceof je(e).HTMLElement:!1}const De=Me["useInsertionEffect".toString()];function bt(e){const t=g.exports.useRef(()=>{});return De?De(()=>{t.current=e}):t.current=e,g.exports.useCallback(function(){for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return t.current==null?void 0:t.current(...o)},[])}function It(e){let{open:t=!1,onOpenChange:n,whileElementsMounted:o,placement:r,middleware:s,strategy:c,nodeId:i}=e===void 0?{}:e;const[l,u]=g.exports.useState(null),p=ve(),a=g.exports.useRef(null),f=g.exports.useRef({}),m=g.exports.useState(()=>ht())[0],d=gt({placement:r,middleware:s,strategy:c,whileElementsMounted:o}),h=bt(n),v=g.exports.useMemo(()=>({...d.refs,domReference:a}),[d.refs]),w=g.exports.useMemo(()=>({...d,refs:v,dataRef:f,nodeId:i,events:m,open:t,onOpenChange:h,_:{domReference:l}}),[d,i,m,t,h,v,l]);U(()=>{const x=p==null?void 0:p.nodesRef.current.find(E=>E.id===i);x&&(x.context=w)});const{reference:y}=d,b=g.exports.useCallback(x=>{(G(x)||x===null)&&(w.refs.domReference.current=x,u(x)),y(x)},[y,w.refs]);return g.exports.useMemo(()=>({...d,context:w,refs:v,reference:b}),[d,v,w,b])}function fe(e,t,n){const o=new Map;return{...n==="floating"&&{tabIndex:-1},...e,...t.map(r=>r?r[n]:null).concat(e).reduce((r,s)=>(s&&Object.entries(s).forEach(c=>{let[i,l]=c;if(i.indexOf("on")===0){if(o.has(i)||o.set(i,[]),typeof l=="function"){var u;(u=o.get(i))==null||u.push(l),r[i]=function(){for(var p,a=arguments.length,f=new Array(a),m=0;m<a;m++)f[m]=arguments[m];(p=o.get(i))==null||p.forEach(d=>d(...f))}}}else r[i]=l}),r),{})}}const Vt=function(e){return e===void 0&&(e=[]),{getReferenceProps:t=>fe(t,e,"reference"),getFloatingProps:t=>fe(t,e,"floating"),getItemProps:t=>fe(t,e,"item")}};function ae(e,t){var n;let o=(n=e.filter(c=>{var i;return c.parentId===t&&((i=c.context)==null?void 0:i.open)}))!=null?n:[],r=o;for(;r.length;){var s;r=(s=e.filter(c=>{var i;return(i=r)==null?void 0:i.some(l=>{var u;return c.parentId===l.id&&((u=c.context)==null?void 0:u.open)})}))!=null?s:[],o=o.concat(r)}return o}function Et(e){return"composedPath"in e?e.composedPath()[0]:e.target}function Ae(e){const t=g.exports.useRef(e);return U(()=>{t.current=e}),t}function Ct(e){const t=g.exports.useRef();return U(()=>{t.current=e},[e]),t.current}function te(e,t,n){return n&&n!=="mouse"?0:typeof e=="number"?e:e==null?void 0:e[t]}const Ft=function(e,t){let{enabled:n=!0,delay:o=0,handleClose:r=null,mouseOnly:s=!1,restMs:c=0,move:i=!0}=t===void 0?{}:t;const{open:l,onOpenChange:u,dataRef:p,events:a,refs:f,_:m}=e,d=ve(),h=Ne(),v=Ae(r),w=Ae(o),y=Ct(l),b=g.exports.useRef(),x=g.exports.useRef(),E=g.exports.useRef(),P=g.exports.useRef(),L=g.exports.useRef(!0),O=g.exports.useRef(!1),C=g.exports.useCallback(()=>{var R;const T=(R=p.current.openEvent)==null?void 0:R.type;return(T==null?void 0:T.includes("mouse"))&&T!=="mousedown"},[p]);g.exports.useEffect(()=>{if(!n)return;function R(){clearTimeout(x.current),clearTimeout(P.current),L.current=!0}return a.on("dismiss",R),()=>{a.off("dismiss",R)}},[n,a,f]),g.exports.useEffect(()=>{if(!n||!v.current)return;function R(){C()&&u(!1)}const T=N(f.floating.current).documentElement;return T.addEventListener("mouseleave",R),()=>{T.removeEventListener("mouseleave",R)}},[f,u,n,v,p,C]);const A=g.exports.useCallback(function(R){R===void 0&&(R=!0);const T=te(w.current,"close",b.current);T&&!E.current?(clearTimeout(x.current),x.current=setTimeout(()=>u(!1),T)):R&&(clearTimeout(x.current),u(!1))},[w,u]),M=g.exports.useCallback(()=>{E.current&&(N(f.floating.current).removeEventListener("pointermove",E.current),E.current=void 0)},[f]),D=g.exports.useCallback(()=>{N(f.floating.current).body.style.pointerEvents="",O.current=!1},[f]);if(g.exports.useEffect(()=>{if(!n)return;function R(){return p.current.openEvent?["click","mousedown"].includes(p.current.openEvent.type):!1}function T(W){if(clearTimeout(x.current),L.current=!1,s&&b.current!=="mouse"||c>0&&te(w.current,"open")===0)return;p.current.openEvent=W;const J=te(w.current,"open",b.current);J?x.current=setTimeout(()=>{u(!0)},J):u(!0)}function X(W){if(R())return;const J=N(f.floating.current);if(clearTimeout(P.current),v.current){clearTimeout(x.current),E.current&&J.removeEventListener("pointermove",E.current),E.current=v.current({...e,tree:d,x:W.clientX,y:W.clientY,onClose(){D(),M(),A()}}),J.addEventListener("pointermove",E.current);return}A()}function H(W){R()||v.current==null||v.current({...e,tree:d,x:W.clientX,y:W.clientY,leave:!0,onClose(){D(),M(),A()}})(W)}const z=f.floating.current,k=f.domReference.current;if(G(k))return l&&k.addEventListener("mouseleave",H),z==null||z.addEventListener("mouseleave",H),i&&k.addEventListener("mousemove",T,{once:!0}),k.addEventListener("mouseenter",T),k.addEventListener("mouseleave",X),()=>{l&&k.removeEventListener("mouseleave",H),z==null||z.removeEventListener("mouseleave",H),i&&k.removeEventListener("mousemove",T),k.removeEventListener("mouseenter",T),k.removeEventListener("mouseleave",X)}},[m.domReference,n,e,s,c,i,A,M,D,u,l,d,f,w,v,p]),U(()=>{if(!!n&&l&&v.current&&v.current.__options.blockPointerEvents&&C()){N(f.floating.current).body.style.pointerEvents="none",O.current=!0;const X=f.domReference.current,H=f.floating.current;if(G(X)&&H){var R,T;const z=d==null||(R=d.nodesRef.current.find(k=>k.id===h))==null||(T=R.context)==null?void 0:T.refs.floating.current;return z&&(z.style.pointerEvents=""),X.style.pointerEvents="auto",H.style.pointerEvents="auto",()=>{X.style.pointerEvents="",H.style.pointerEvents=""}}}},[n,l,h,f,d,v,p,C]),U(()=>{y&&!l&&(b.current=void 0,M(),D())}),g.exports.useEffect(()=>()=>{M(),clearTimeout(x.current),clearTimeout(P.current),O.current&&D()},[n,M,D]),!n)return{};function S(R){b.current=R.pointerType}return{reference:{onPointerDown:S,onPointerEnter:S,onMouseMove(){l||c===0||(clearTimeout(P.current),P.current=setTimeout(()=>{L.current||u(!0)},c))}},floating:{onMouseEnter(){clearTimeout(x.current)},onMouseLeave(){A(!1)}}}},_e=g.exports.createContext({delay:1e3,initialDelay:1e3,currentId:null,setCurrentId:()=>{},setState:()=>{}}),Lt=()=>g.exports.useContext(_e),Ht=e=>{let{children:t,delay:n}=e;const[o,r]=g.exports.useState({delay:n,initialDelay:n,currentId:null}),s=g.exports.useCallback(c=>{r(i=>({...i,currentId:c}))},[]);return Xe(_e.Provider,{value:g.exports.useMemo(()=>({...o,setState:r,setCurrentId:s}),[o,r,s]),children:t})},Wt=(e,t)=>{let{open:n,onOpenChange:o}=e,{id:r}=t;const{currentId:s,initialDelay:c,setState:i}=Lt();g.exports.useEffect(()=>{s&&(i(l=>({...l,delay:{open:1,close:te(c,"close")}})),s!==r&&o(!1))},[r,o,i,s,c]),g.exports.useEffect(()=>{!n&&s===r&&(o(!1),i(l=>({...l,delay:c,currentId:null})))},[n,i,s,r,o,c])},Nt=function(e,t){let{open:n}=e,{enabled:o=!0,role:r="dialog"}=t===void 0?{}:t;const s=Oe(),c=Oe(),i={id:s,role:r};return o?r==="tooltip"?{reference:{"aria-describedby":n?s:void 0},floating:i}:{reference:{"aria-expanded":n?"true":"false","aria-haspopup":r==="alertdialog"?"dialog":r,"aria-controls":n?s:void 0,...r==="listbox"&&{role:"combobox"},...r==="menu"&&{id:c}},floating:{...i,...r==="menu"&&{"aria-labelledby":c}}}:{}};function de(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}const Tt={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},Pt={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},jt=function(e,t){let{open:n,onOpenChange:o,refs:r,events:s,nodeId:c}=e,{enabled:i=!0,escapeKey:l=!0,outsidePress:u=!0,outsidePressEvent:p="pointerdown",referencePress:a=!1,referencePressEvent:f="pointerdown",ancestorScroll:m=!1,bubbles:d=!0}=t===void 0?{}:t;const h=ve(),v=Ne()!=null,w=g.exports.useRef(!1);return g.exports.useEffect(()=>{if(!n||!i)return;function y(L){if(L.key==="Escape"){if(!d&&h&&ae(h.nodesRef.current,c).length>0)return;s.emit("dismiss",{preventScroll:!1}),o(!1)}}function b(L){const O=w.current;if(w.current=!1,O)return;const C=Et(L);if(G(C)&&r.floating.current){var A;const D=(A=r.floating.current.ownerDocument.defaultView)!=null?A:window,S=C.scrollWidth>C.clientWidth,R=C.scrollHeight>C.clientHeight;let T=R&&L.offsetX>C.clientWidth;if(R&&D.getComputedStyle(C).direction==="rtl"&&(T=L.offsetX<=C.offsetWidth-C.clientWidth),T||S&&L.offsetY>C.clientHeight)return}const M=h&&ae(h.nodesRef.current,c).some(D=>{var S;return de(L,(S=D.context)==null?void 0:S.refs.floating.current)});de(L,r.floating.current)||de(L,r.domReference.current)||M||!d&&h&&ae(h.nodesRef.current,c).length>0||(s.emit("dismiss",v?{preventScroll:!0}:!1),o(!1))}function x(){o(!1)}const E=N(r.floating.current);l&&E.addEventListener("keydown",y),u&&E.addEventListener(p,b);const P=(m?[...G(r.reference.current)?K(r.reference.current):[],...G(r.floating.current)?K(r.floating.current):[]]:[]).filter(L=>{var O;return L!==((O=E.defaultView)==null?void 0:O.visualViewport)});return P.forEach(L=>L.addEventListener("scroll",x,{passive:!0})),()=>{l&&E.removeEventListener("keydown",y),u&&E.removeEventListener(p,b),P.forEach(L=>L.removeEventListener("scroll",x))}},[l,u,p,s,h,c,n,o,m,i,d,r,v]),i?{reference:{[Tt[f]]:()=>{a&&(s.emit("dismiss"),o(!1))}},floating:{[Pt[p]]:()=>{w.current=!0}}}:{}},_t=function(e,t){let{open:n,onOpenChange:o,dataRef:r,refs:s,events:c}=e,{enabled:i=!0,keyboardOnly:l=!0}=t===void 0?{}:t;const u=g.exports.useRef(""),p=g.exports.useRef(!1),a=g.exports.useRef();return g.exports.useEffect(()=>{var f;if(!i)return;const d=(f=N(s.floating.current).defaultView)!=null?f:window;function h(){!n&&Rt(s.domReference.current)&&s.domReference.current.blur()}return d.addEventListener("blur",h),()=>{d.removeEventListener("blur",h)}},[s,n,i]),g.exports.useEffect(()=>{if(!i)return;function f(){p.current=!0}return c.on("dismiss",f),()=>{c.off("dismiss",f)}},[c,i]),g.exports.useEffect(()=>()=>{clearTimeout(a.current)},[]),i?{reference:{onPointerDown(f){let{pointerType:m}=f;u.current=m,p.current=!!(m&&l)},onPointerLeave(){p.current=!1},onFocus(f){var m,d,h;p.current||f.type==="focus"&&((m=r.current.openEvent)==null?void 0:m.type)==="mousedown"&&(d=s.domReference.current)!=null&&d.contains((h=r.current.openEvent)==null?void 0:h.target)||(r.current.openEvent=f.nativeEvent,o(!0))},onBlur(f){const m=f.relatedTarget;a.current=setTimeout(()=>{var d,h;(d=s.floating.current)!=null&&d.contains(m)||(h=s.domReference.current)!=null&&h.contains(m)||(p.current=!1,o(!1))})}}}:{}};export{Ht as F,kt as a,Mt as b,$t as c,Lt as d,Vt as e,Dt as f,K as g,Ft as h,_t as i,Nt as j,jt as k,Wt as l,At as o,St as s,It as u};
